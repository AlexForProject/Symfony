{% extends "formformBundle::layout.html.twig" %}

{% block prix %}
<p>Voici les tarifs disponibles :</p>

<div class="table-hover">
	<table class="table">
		<thead>
			<tr>
				<th>Age</th>
				<th>Prix</th>
			</tr>
		</thead>
		<tbody>
			<tr>
				<th>Enfant inférieur à 4 ans</th>
				<th>Gratuit</th>
			</tr>
			<tr>
				<th>Enfant entre 4 et 12 ans</th>
				<th>8€</th>
			</tr>
			<tr>
				<th>Adulte de plus de 12 ans</th>
				<th>16€</th>
			</tr>
			<tr>
				<th>Sénior, 60 ans et plus</th>
				<th>12€</th>
			</tr>
	</table>
</div>
<br />
<p>Le musée est fermé aux dates suivantes :
<ul>
<li>Les mardis
<li>Le 1er Mai
<li>Le 1er Novembre
<li>Le 25 Décembre7
</ul>
{% endblock %}

{% block commande %}

<p>Pour pouvoir vérifier la disponibilité des places, veuillez indiquer la date à laquelle vous souhaiter établir votre visite :</p>
<div class="well">
{{ form(form) }}
</div>
<br />
<p>A partir de 14H, il n'est plus possible de commander en journée complète pour le jour-même</p>
<script src="//ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>

<script type="text/javascript">

  $(document).ready(function() {

  	var ajd = new Date();
	var billet = $('#form_billet');

  	var month = $('#form_date_month');
  	var day = $('#form_date_day');
  	var year = $('#form_date_year');

  	var form = $('.form-control');

  	form.click(function(e){

  		if((ajd.getMonth()+1) == month.val() && ajd.getDate() == day.val() && ajd.getFullYear() == year.val())
  		{
	  		if((ajd.getHours()) >= 14)
	  		{
	  			console.log("ok deuxième if");
	  			billet.prop('checked', 'true');	
	  			document.getElementById("form_billet").style.visibility = "hidden";
	  		}
  		}
  		if((ajd.getMonth()+1) != month.val() || ajd.getDate() != day.val() || ajd.getFullYear() != year.val())
  		{
  			document.getElementById("form_billet").style.visibility = "visible";
  		}
  	})
  });

</script>
{% endblock %}